"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/rewrite-summary";
exports.ids = ["pages/api/rewrite-summary"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frewrite-summary&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Frewrite-summary.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frewrite-summary&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Frewrite-summary.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/rewrite-summary.ts */ \"(api-node)/./src/pages/api/rewrite-summary.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/rewrite-summary\",\n        pathname: \"/api/rewrite-summary\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_rewrite_summary_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcmV3cml0ZS1zdW1tYXJ5JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZyZXdyaXRlLXN1bW1hcnkudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDhEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw4REFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvcmV3cml0ZS1zdW1tYXJ5LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZXdyaXRlLXN1bW1hcnlcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yZXdyaXRlLXN1bW1hcnlcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frewrite-summary&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Frewrite-summary.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/rewrite-summary.ts":
/*!******************************************!*\
  !*** ./src/pages/api/rewrite-summary.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var diff_match_patch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! diff-match-patch */ \"diff-match-patch\");\n/* harmony import */ var diff_match_patch__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(diff_match_patch__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst dmp = new (diff_match_patch__WEBPACK_IMPORTED_MODULE_1___default())();\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        res.setHeader('Allow', [\n            'POST'\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    const { originalSummary, optimizedBullets, projects, skills, targetTitle, targetCompany, requirements, keywords, jobDescription, experienceSnapshot } = req.body;\n    if (typeof originalSummary !== 'string' || !Array.isArray(optimizedBullets) || !Array.isArray(skills) || typeof targetTitle !== 'string' || typeof targetCompany !== 'string' || !Array.isArray(requirements) || !Array.isArray(keywords) || typeof jobDescription !== 'string' || experienceSnapshot !== undefined && typeof experienceSnapshot !== 'string' || projects !== undefined && !Array.isArray(projects)) {\n        return res.status(400).json({\n            error: 'Invalid request payload'\n        });\n    }\n    try {\n        const systemPrompt = `\nYou are an elite resume editor rewriting a professional summary.\n\nYour task is to optimize the summary to better align with a target role, using the revised work experience bullets and job description as context.\n\nGuidelines:\n- Write in a concise, third-person style (no \"I\", no first person)\n- Begin with a powerful, differentiated positioning statement — avoid weak openings like 'Experienced professional'. For example: “Award-winning enterprise sales leader” or “Strategic revenue executive” to immediately convey value.\n- Write 3–4 value-dense sentences totaling around 60–80 words; each sentence must add unique value\n- Use tone and language appropriate for a seasoned ${targetTitle}, emphasizing strategic impact, technical depth, or leadership contributions as appropriate\n- Highlight alignment with the target role based on skills, achievements, and responsibilities — but do not mention the target company or job title directly\n- Weave in keywords naturally **only where they enhance clarity or relevance**; avoid keyword stuffing or listing too many tools\n- Limit hard skill/tool name-dropping to 2–3 maximum, only if central to the candidate's value\n- Do NOT include a separate skills section\n- Do NOT fabricate experience or exaggerate impact\n- Return only the rewritten summary — no labels, no headers, no quotes, no extra formatting\n`.trim();\n        // Construct user prompt, including optimized projects if any\n        const projectsSection = projects && projects.length ? `OPTIMIZED PROJECTS:\\n${projects.map((p)=>`- ${p.name}: ${p.description}`).join('\\n')}\\n\\n` : '';\n        const userPrompt = `\nORIGINAL SUMMARY:\n${originalSummary}\n\nTARGET ROLE:\n- Title: ${targetTitle}\n- Company: ${targetCompany}\n- Requirements: ${requirements.join('; ')}\n\nKEYWORDS TO INCORPORATE:\n${keywords.join(', ')}\n\nEXPERIENCE SNAPSHOT:\n${experienceSnapshot}\n\nOPTIMIZED BULLETS:\n${optimizedBullets.join('\\n')}\n\n${projectsSection}FULL JOB DESCRIPTION:\n${jobDescription}\n`.trim();\n        const completion = await openai.chat.completions.create({\n            model: 'gpt-4.1-mini-2025-04-14',\n            messages: [\n                {\n                    role: 'system',\n                    content: systemPrompt\n                },\n                {\n                    role: 'user',\n                    content: userPrompt\n                }\n            ]\n        });\n        let rewritten = completion.choices[0]?.message?.content?.trim() || '';\n        if (rewritten.startsWith('\"') && rewritten.endsWith('\"') || rewritten.startsWith(\"'\") && rewritten.endsWith(\"'\")) {\n            rewritten = rewritten.slice(1, -1).trim();\n        }\n        const diffs = dmp.diff_main(originalSummary, rewritten);\n        dmp.diff_cleanupSemantic(diffs);\n        const diffHtml = dmp.diff_prettyHtml(diffs);\n        const keywordsUsed = keywords.filter((k)=>rewritten.toLowerCase().includes(k.toLowerCase()));\n        const result = {\n            rewrittenSummary: rewritten\n        };\n        return res.status(200).json({\n            ...result,\n            originalSummary,\n            keywordsUsed,\n            diff: diffHtml\n        });\n    } catch (error) {\n        console.error('Error in rewrite-summary API:', error);\n        return res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvcmV3cml0ZS1zdW1tYXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDNEI7QUFDa0I7QUFHOUMsTUFBTUUsU0FBUyxJQUFJRiw4Q0FBTUEsQ0FBQztJQUFFRyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFBQztBQUMvRCxNQUFNQyxNQUFNLElBQUlOLHlEQUFjQTtBQUVmLGVBQWVPLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCRCxJQUFJRSxTQUFTLENBQUMsU0FBUztZQUFDO1NBQU87UUFDL0IsT0FBT0YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRUwsSUFBSUUsTUFBTSxDQUFDLFlBQVksQ0FBQztJQUMvRDtJQUNBLE1BQU0sRUFDSkksZUFBZSxFQUNmQyxnQkFBZ0IsRUFDaEJDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsWUFBWSxFQUNaQyxRQUFRLEVBQ1JDLGNBQWMsRUFDZEMsa0JBQWtCLEVBQ25CLEdBQUdmLElBQUlnQixJQUFJO0lBWVosSUFDRSxPQUFPVixvQkFBb0IsWUFDM0IsQ0FBQ1csTUFBTUMsT0FBTyxDQUFDWCxxQkFDZixDQUFDVSxNQUFNQyxPQUFPLENBQUNULFdBQ2YsT0FBT0MsZ0JBQWdCLFlBQ3ZCLE9BQU9DLGtCQUFrQixZQUN6QixDQUFDTSxNQUFNQyxPQUFPLENBQUNOLGlCQUNmLENBQUNLLE1BQU1DLE9BQU8sQ0FBQ0wsYUFDZixPQUFPQyxtQkFBbUIsWUFDekJDLHVCQUF1QkksYUFBYSxPQUFPSix1QkFBdUIsWUFDbEVQLGFBQWFXLGFBQWEsQ0FBQ0YsTUFBTUMsT0FBTyxDQUFDVixXQUMxQztRQUNBLE9BQU9QLElBQUlHLE1BQU0sQ0FBQyxLQUFLZ0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBMEI7SUFDakU7SUFDQSxJQUFJO1FBQ0YsTUFBTUMsZUFBZSxDQUFDOzs7Ozs7Ozs7bURBU3lCLEVBQUVaLFlBQVk7Ozs7Ozs7QUFPakUsQ0FBQyxDQUFDYSxJQUFJO1FBQ0YsNkRBQTZEO1FBQzdELE1BQU1DLGtCQUFrQmhCLFlBQVlBLFNBQVNpQixNQUFNLEdBQy9DLENBQUMscUJBQXFCLEVBQUVqQixTQUFTa0IsR0FBRyxDQUFDQyxDQUFBQSxJQUFLLENBQUMsRUFBRSxFQUFFQSxFQUFFQyxJQUFJLENBQUMsRUFBRSxFQUFFRCxFQUFFRSxXQUFXLEVBQUUsRUFBRUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQzNGO1FBQ0osTUFBTUMsYUFBYSxDQUFDOztBQUV4QixFQUFFekIsZ0JBQWdCOzs7U0FHVCxFQUFFSSxZQUFZO1dBQ1osRUFBRUMsY0FBYztnQkFDWCxFQUFFQyxhQUFha0IsSUFBSSxDQUFDLE1BQU07OztBQUcxQyxFQUFFakIsU0FBU2lCLElBQUksQ0FBQyxNQUFNOzs7QUFHdEIsRUFBRWYsbUJBQW1COzs7QUFHckIsRUFBRVIsaUJBQWlCdUIsSUFBSSxDQUFDLE1BQU07O0FBRTlCLEVBQUVOLGdCQUFnQjtBQUNsQixFQUFFVixlQUFlO0FBQ2pCLENBQUMsQ0FBQ1MsSUFBSTtRQUNGLE1BQU1TLGFBQWEsTUFBTXZDLE9BQU93QyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsTUFBTSxDQUFDO1lBQ3REQyxPQUFPO1lBQ1BDLFVBQVU7Z0JBQ1I7b0JBQUVDLE1BQU07b0JBQVVDLFNBQVNqQjtnQkFBYTtnQkFDeEM7b0JBQUVnQixNQUFNO29CQUFRQyxTQUFTUjtnQkFBVzthQUNyQztRQUNIO1FBQ0EsSUFBSVMsWUFBWVIsV0FBV1MsT0FBTyxDQUFDLEVBQUUsRUFBRUMsU0FBU0gsU0FBU2hCLFVBQVU7UUFDbkUsSUFDRSxVQUFXb0IsVUFBVSxDQUFDLFFBQVFILFVBQVVJLFFBQVEsQ0FBQyxRQUNoREosVUFBVUcsVUFBVSxDQUFDLFFBQVFILFVBQVVJLFFBQVEsQ0FBQyxNQUNqRDtZQUNBSixZQUFZQSxVQUFVSyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUd0QixJQUFJO1FBQ3pDO1FBQ0EsTUFBTXVCLFFBQVFoRCxJQUFJaUQsU0FBUyxDQUFDekMsaUJBQWlCa0M7UUFDN0MxQyxJQUFJa0Qsb0JBQW9CLENBQUNGO1FBQ3pCLE1BQU1HLFdBQVduRCxJQUFJb0QsZUFBZSxDQUFDSjtRQUNyQyxNQUFNSyxlQUFldEMsU0FBU3VDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFDbkNiLFVBQVVjLFdBQVcsR0FBR0MsUUFBUSxDQUFDRixFQUFFQyxXQUFXO1FBRWhELE1BQU1FLFNBQWlDO1lBQUVDLGtCQUFrQmpCO1FBQVU7UUFDckUsT0FBT3ZDLElBQUlHLE1BQU0sQ0FBQyxLQUFLZ0IsSUFBSSxDQUFDO1lBQUUsR0FBR29DLE1BQU07WUFBRWxEO1lBQWlCNkM7WUFBY08sTUFBTVQ7UUFBUztJQUN6RixFQUFFLE9BQU81QixPQUFPO1FBQ2RzQyxRQUFRdEMsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT3BCLElBQUlHLE1BQU0sQ0FBQyxLQUFLZ0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2NvbGluaGF5ZXMvcmV6aWEtYWktcmVzdW1lLWNyYWZ0L3NyYy9wYWdlcy9hcGkvcmV3cml0ZS1zdW1tYXJ5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xuaW1wb3J0IERpZmZNYXRjaFBhdGNoIGZyb20gJ2RpZmYtbWF0Y2gtcGF0Y2gnO1xuaW1wb3J0IHR5cGUgeyBSZXdyaXRlU3VtbWFyeVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9yZXN1bWUnO1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHsgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB9KTtcbmNvbnN0IGRtcCA9IG5ldyBEaWZmTWF0Y2hQYXRjaCgpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcbiAgfVxuICBjb25zdCB7XG4gICAgb3JpZ2luYWxTdW1tYXJ5LFxuICAgIG9wdGltaXplZEJ1bGxldHMsXG4gICAgcHJvamVjdHMsXG4gICAgc2tpbGxzLFxuICAgIHRhcmdldFRpdGxlLFxuICAgIHRhcmdldENvbXBhbnksXG4gICAgcmVxdWlyZW1lbnRzLFxuICAgIGtleXdvcmRzLFxuICAgIGpvYkRlc2NyaXB0aW9uLFxuICAgIGV4cGVyaWVuY2VTbmFwc2hvdCxcbiAgfSA9IHJlcS5ib2R5IGFzIHtcbiAgICBvcmlnaW5hbFN1bW1hcnk/OiBzdHJpbmc7XG4gICAgb3B0aW1pemVkQnVsbGV0cz86IHN0cmluZ1tdO1xuICAgIHByb2plY3RzPzogeyBuYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfVtdO1xuICAgIHNraWxscz86IHN0cmluZ1tdO1xuICAgIHRhcmdldFRpdGxlPzogc3RyaW5nO1xuICAgIHRhcmdldENvbXBhbnk/OiBzdHJpbmc7XG4gICAgcmVxdWlyZW1lbnRzPzogc3RyaW5nW107XG4gICAga2V5d29yZHM/OiBzdHJpbmdbXTtcbiAgICBqb2JEZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICBleHBlcmllbmNlU25hcHNob3Q/OiBzdHJpbmc7XG4gIH07XG4gIGlmIChcbiAgICB0eXBlb2Ygb3JpZ2luYWxTdW1tYXJ5ICE9PSAnc3RyaW5nJyB8fFxuICAgICFBcnJheS5pc0FycmF5KG9wdGltaXplZEJ1bGxldHMpIHx8XG4gICAgIUFycmF5LmlzQXJyYXkoc2tpbGxzKSB8fFxuICAgIHR5cGVvZiB0YXJnZXRUaXRsZSAhPT0gJ3N0cmluZycgfHxcbiAgICB0eXBlb2YgdGFyZ2V0Q29tcGFueSAhPT0gJ3N0cmluZycgfHxcbiAgICAhQXJyYXkuaXNBcnJheShyZXF1aXJlbWVudHMpIHx8XG4gICAgIUFycmF5LmlzQXJyYXkoa2V5d29yZHMpIHx8XG4gICAgdHlwZW9mIGpvYkRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fFxuICAgIChleHBlcmllbmNlU25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZXhwZXJpZW5jZVNuYXBzaG90ICE9PSAnc3RyaW5nJykgfHxcbiAgICAocHJvamVjdHMgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShwcm9qZWN0cykpXG4gICkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IHBheWxvYWQnIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFxuWW91IGFyZSBhbiBlbGl0ZSByZXN1bWUgZWRpdG9yIHJld3JpdGluZyBhIHByb2Zlc3Npb25hbCBzdW1tYXJ5LlxuXG5Zb3VyIHRhc2sgaXMgdG8gb3B0aW1pemUgdGhlIHN1bW1hcnkgdG8gYmV0dGVyIGFsaWduIHdpdGggYSB0YXJnZXQgcm9sZSwgdXNpbmcgdGhlIHJldmlzZWQgd29yayBleHBlcmllbmNlIGJ1bGxldHMgYW5kIGpvYiBkZXNjcmlwdGlvbiBhcyBjb250ZXh0LlxuXG5HdWlkZWxpbmVzOlxuLSBXcml0ZSBpbiBhIGNvbmNpc2UsIHRoaXJkLXBlcnNvbiBzdHlsZSAobm8gXCJJXCIsIG5vIGZpcnN0IHBlcnNvbilcbi0gQmVnaW4gd2l0aCBhIHBvd2VyZnVsLCBkaWZmZXJlbnRpYXRlZCBwb3NpdGlvbmluZyBzdGF0ZW1lbnQg4oCUIGF2b2lkIHdlYWsgb3BlbmluZ3MgbGlrZSAnRXhwZXJpZW5jZWQgcHJvZmVzc2lvbmFsJy4gRm9yIGV4YW1wbGU6IOKAnEF3YXJkLXdpbm5pbmcgZW50ZXJwcmlzZSBzYWxlcyBsZWFkZXLigJ0gb3Ig4oCcU3RyYXRlZ2ljIHJldmVudWUgZXhlY3V0aXZl4oCdIHRvIGltbWVkaWF0ZWx5IGNvbnZleSB2YWx1ZS5cbi0gV3JpdGUgM+KAkzQgdmFsdWUtZGVuc2Ugc2VudGVuY2VzIHRvdGFsaW5nIGFyb3VuZCA2MOKAkzgwIHdvcmRzOyBlYWNoIHNlbnRlbmNlIG11c3QgYWRkIHVuaXF1ZSB2YWx1ZVxuLSBVc2UgdG9uZSBhbmQgbGFuZ3VhZ2UgYXBwcm9wcmlhdGUgZm9yIGEgc2Vhc29uZWQgJHt0YXJnZXRUaXRsZX0sIGVtcGhhc2l6aW5nIHN0cmF0ZWdpYyBpbXBhY3QsIHRlY2huaWNhbCBkZXB0aCwgb3IgbGVhZGVyc2hpcCBjb250cmlidXRpb25zIGFzIGFwcHJvcHJpYXRlXG4tIEhpZ2hsaWdodCBhbGlnbm1lbnQgd2l0aCB0aGUgdGFyZ2V0IHJvbGUgYmFzZWQgb24gc2tpbGxzLCBhY2hpZXZlbWVudHMsIGFuZCByZXNwb25zaWJpbGl0aWVzIOKAlCBidXQgZG8gbm90IG1lbnRpb24gdGhlIHRhcmdldCBjb21wYW55IG9yIGpvYiB0aXRsZSBkaXJlY3RseVxuLSBXZWF2ZSBpbiBrZXl3b3JkcyBuYXR1cmFsbHkgKipvbmx5IHdoZXJlIHRoZXkgZW5oYW5jZSBjbGFyaXR5IG9yIHJlbGV2YW5jZSoqOyBhdm9pZCBrZXl3b3JkIHN0dWZmaW5nIG9yIGxpc3RpbmcgdG9vIG1hbnkgdG9vbHNcbi0gTGltaXQgaGFyZCBza2lsbC90b29sIG5hbWUtZHJvcHBpbmcgdG8gMuKAkzMgbWF4aW11bSwgb25seSBpZiBjZW50cmFsIHRvIHRoZSBjYW5kaWRhdGUncyB2YWx1ZVxuLSBEbyBOT1QgaW5jbHVkZSBhIHNlcGFyYXRlIHNraWxscyBzZWN0aW9uXG4tIERvIE5PVCBmYWJyaWNhdGUgZXhwZXJpZW5jZSBvciBleGFnZ2VyYXRlIGltcGFjdFxuLSBSZXR1cm4gb25seSB0aGUgcmV3cml0dGVuIHN1bW1hcnkg4oCUIG5vIGxhYmVscywgbm8gaGVhZGVycywgbm8gcXVvdGVzLCBubyBleHRyYSBmb3JtYXR0aW5nXG5gLnRyaW0oKTtcbiAgICAvLyBDb25zdHJ1Y3QgdXNlciBwcm9tcHQsIGluY2x1ZGluZyBvcHRpbWl6ZWQgcHJvamVjdHMgaWYgYW55XG4gICAgY29uc3QgcHJvamVjdHNTZWN0aW9uID0gcHJvamVjdHMgJiYgcHJvamVjdHMubGVuZ3RoXG4gICAgICA/IGBPUFRJTUlaRUQgUFJPSkVDVFM6XFxuJHtwcm9qZWN0cy5tYXAocCA9PiBgLSAke3AubmFtZX06ICR7cC5kZXNjcmlwdGlvbn1gKS5qb2luKCdcXG4nKX1cXG5cXG5gXG4gICAgICA6ICcnO1xuICAgIGNvbnN0IHVzZXJQcm9tcHQgPSBgXG5PUklHSU5BTCBTVU1NQVJZOlxuJHtvcmlnaW5hbFN1bW1hcnl9XG5cblRBUkdFVCBST0xFOlxuLSBUaXRsZTogJHt0YXJnZXRUaXRsZX1cbi0gQ29tcGFueTogJHt0YXJnZXRDb21wYW55fVxuLSBSZXF1aXJlbWVudHM6ICR7cmVxdWlyZW1lbnRzLmpvaW4oJzsgJyl9XG5cbktFWVdPUkRTIFRPIElOQ09SUE9SQVRFOlxuJHtrZXl3b3Jkcy5qb2luKCcsICcpfVxuXG5FWFBFUklFTkNFIFNOQVBTSE9UOlxuJHtleHBlcmllbmNlU25hcHNob3R9XG5cbk9QVElNSVpFRCBCVUxMRVRTOlxuJHtvcHRpbWl6ZWRCdWxsZXRzLmpvaW4oJ1xcbicpfVxuXG4ke3Byb2plY3RzU2VjdGlvbn1GVUxMIEpPQiBERVNDUklQVElPTjpcbiR7am9iRGVzY3JpcHRpb259XG5gLnRyaW0oKTtcbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTQuMS1taW5pLTIwMjUtMDQtMTQnLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB1c2VyUHJvbXB0IH0sXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGxldCByZXdyaXR0ZW4gPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSB8fCAnJztcbiAgICBpZiAoXG4gICAgICAocmV3cml0dGVuLnN0YXJ0c1dpdGgoJ1wiJykgJiYgcmV3cml0dGVuLmVuZHNXaXRoKCdcIicpKSB8fFxuICAgICAgKHJld3JpdHRlbi5zdGFydHNXaXRoKFwiJ1wiKSAmJiByZXdyaXR0ZW4uZW5kc1dpdGgoXCInXCIpKVxuICAgICkge1xuICAgICAgcmV3cml0dGVuID0gcmV3cml0dGVuLnNsaWNlKDEsIC0xKS50cmltKCk7XG4gICAgfVxuICAgIGNvbnN0IGRpZmZzID0gZG1wLmRpZmZfbWFpbihvcmlnaW5hbFN1bW1hcnksIHJld3JpdHRlbik7XG4gICAgZG1wLmRpZmZfY2xlYW51cFNlbWFudGljKGRpZmZzKTtcbiAgICBjb25zdCBkaWZmSHRtbCA9IGRtcC5kaWZmX3ByZXR0eUh0bWwoZGlmZnMpO1xuICAgIGNvbnN0IGtleXdvcmRzVXNlZCA9IGtleXdvcmRzLmZpbHRlcihrID0+XG4gICAgICByZXdyaXR0ZW4udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrLnRvTG93ZXJDYXNlKCkpXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQ6IFJld3JpdGVTdW1tYXJ5UmVzcG9uc2UgPSB7IHJld3JpdHRlblN1bW1hcnk6IHJld3JpdHRlbiB9O1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IC4uLnJlc3VsdCwgb3JpZ2luYWxTdW1tYXJ5LCBrZXl3b3Jkc1VzZWQsIGRpZmY6IGRpZmZIdG1sIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJld3JpdGUtc3VtbWFyeSBBUEk6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJPcGVuQUkiLCJEaWZmTWF0Y2hQYXRjaCIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImRtcCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJlbmQiLCJvcmlnaW5hbFN1bW1hcnkiLCJvcHRpbWl6ZWRCdWxsZXRzIiwicHJvamVjdHMiLCJza2lsbHMiLCJ0YXJnZXRUaXRsZSIsInRhcmdldENvbXBhbnkiLCJyZXF1aXJlbWVudHMiLCJrZXl3b3JkcyIsImpvYkRlc2NyaXB0aW9uIiwiZXhwZXJpZW5jZVNuYXBzaG90IiwiYm9keSIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImpzb24iLCJlcnJvciIsInN5c3RlbVByb21wdCIsInRyaW0iLCJwcm9qZWN0c1NlY3Rpb24iLCJsZW5ndGgiLCJtYXAiLCJwIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiam9pbiIsInVzZXJQcm9tcHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwicmV3cml0dGVuIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJzbGljZSIsImRpZmZzIiwiZGlmZl9tYWluIiwiZGlmZl9jbGVhbnVwU2VtYW50aWMiLCJkaWZmSHRtbCIsImRpZmZfcHJldHR5SHRtbCIsImtleXdvcmRzVXNlZCIsImZpbHRlciIsImsiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicmVzdWx0IiwicmV3cml0dGVuU3VtbWFyeSIsImRpZmYiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/rewrite-summary.ts\n");

/***/ }),

/***/ "diff-match-patch":
/*!***********************************!*\
  !*** external "diff-match-patch" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("diff-match-patch");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frewrite-summary&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Frewrite-summary.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();