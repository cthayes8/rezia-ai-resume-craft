"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate-cover-letter";
exports.ids = ["pages/api/generate-cover-letter"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-cover-letter&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-cover-letter.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-cover-letter&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-cover-letter.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/generate-cover-letter.ts */ \"(api-node)/./src/pages/api/generate-cover-letter.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate-cover-letter\",\n        pathname: \"/api/generate-cover-letter\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_generate_cover_letter_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUtY292ZXItbGV0dGVyJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZnZW5lcmF0ZS1jb3Zlci1sZXR0ZXIudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDcUU7QUFDckU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG9FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxvRUFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvZ2VuZXJhdGUtY292ZXItbGV0dGVyLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1jb3Zlci1sZXR0ZXJcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1jb3Zlci1sZXR0ZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-cover-letter&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-cover-letter.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    global.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQU12QyxNQUFNQyxTQUFTQyxPQUFPRCxNQUFNLElBQUksSUFBSUQsd0RBQVlBLEdBQUc7QUFFMUQsSUFBSUcsSUFBcUMsRUFBRTtJQUN6Q0QsT0FBT0QsTUFBTSxHQUFHQTtBQUNsQiIsInNvdXJjZXMiOlsiL1VzZXJzL2NvbGluaGF5ZXMvcmV6aWEtYWktcmVzdW1lLWNyYWZ0L3NyYy9saWIvcHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWwucHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsLnByaXNtYSA9IHByaXNtYTtcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJnbG9iYWwiLCJwcm9jZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/wrapCoverLetterContent.ts":
/*!*******************************************!*\
  !*** ./src/lib/wrapCoverLetterContent.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   wrapCoverLetterContent: () => (/* binding */ wrapCoverLetterContent)\n/* harmony export */ });\n/**\n * Helper to wrap an AI-generated cover letter body with greeting and sign-off.\n */ function wrapCoverLetterContent({ body, hiringManagerName, companyName, userName, userLinkedIn, userEmail, userPhone }) {\n    // Greeting\n    const greeting = hiringManagerName ? `Dear ${hiringManagerName},` : companyName ? `Dear ${companyName} Hiring Team,` : 'Dear Hiring Manager,';\n    // Sign-off lines: include only defined contact info, each on its own line\n    const contactLines = [];\n    if (userName?.trim()) contactLines.push(userName.trim());\n    if (userLinkedIn?.trim()) contactLines.push(userLinkedIn.trim());\n    if (userEmail?.trim()) contactLines.push(userEmail.trim());\n    if (userPhone?.trim()) contactLines.push(userPhone.trim());\n    // Build sign-off: greeting + contact lines, each separated by single newline\n    const signOffLines = [\n        'Sincerely,',\n        ...contactLines\n    ];\n    const signOff = signOffLines.join('\\n');\n    // Construct full letter\n    return `${greeting}\\n\\n${body.trim()}\\n\\n${signOff}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvd3JhcENvdmVyTGV0dGVyQ29udGVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0NBRUMsR0FXTSxTQUFTQSx1QkFBdUIsRUFDckNDLElBQUksRUFDSkMsaUJBQWlCLEVBQ2pCQyxXQUFXLEVBQ1hDLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxTQUFTLEVBQ1RDLFNBQVMsRUFDUTtJQUNqQixXQUFXO0lBQ1gsTUFBTUMsV0FBV04sb0JBQ2IsQ0FBQyxLQUFLLEVBQUVBLGtCQUFrQixDQUFDLENBQUMsR0FDNUJDLGNBQ0EsQ0FBQyxLQUFLLEVBQUVBLFlBQVksYUFBYSxDQUFDLEdBQ2xDO0lBRUosMEVBQTBFO0lBQzFFLE1BQU1NLGVBQXlCLEVBQUU7SUFDakMsSUFBSUwsVUFBVU0sUUFBUUQsYUFBYUUsSUFBSSxDQUFDUCxTQUFTTSxJQUFJO0lBQ3JELElBQUlMLGNBQWNLLFFBQVFELGFBQWFFLElBQUksQ0FBQ04sYUFBYUssSUFBSTtJQUM3RCxJQUFJSixXQUFXSSxRQUFRRCxhQUFhRSxJQUFJLENBQUNMLFVBQVVJLElBQUk7SUFDdkQsSUFBSUgsV0FBV0csUUFBUUQsYUFBYUUsSUFBSSxDQUFDSixVQUFVRyxJQUFJO0lBQ3ZELDZFQUE2RTtJQUM3RSxNQUFNRSxlQUFlO1FBQUM7V0FBaUJIO0tBQWE7SUFDcEQsTUFBTUksVUFBVUQsYUFBYUUsSUFBSSxDQUFDO0lBRWxDLHdCQUF3QjtJQUN4QixPQUFPLEdBQUdOLFNBQVMsSUFBSSxFQUFFUCxLQUFLUyxJQUFJLEdBQUcsSUFBSSxFQUFFRyxTQUFTO0FBQ3REIiwic291cmNlcyI6WyIvVXNlcnMvY29saW5oYXllcy9yZXppYS1haS1yZXN1bWUtY3JhZnQvc3JjL2xpYi93cmFwQ292ZXJMZXR0ZXJDb250ZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSGVscGVyIHRvIHdyYXAgYW4gQUktZ2VuZXJhdGVkIGNvdmVyIGxldHRlciBib2R5IHdpdGggZ3JlZXRpbmcgYW5kIHNpZ24tb2ZmLlxuICovXG5leHBvcnQgdHlwZSBDb3ZlckxldHRlcklucHV0ID0ge1xuICBib2R5OiBzdHJpbmc7IC8vIEFJLWdlbmVyYXRlZCBsZXR0ZXIgYm9keSAobm8gZ3JlZXRpbmcgb3Igc2lnbi1vZmYpXG4gIGhpcmluZ01hbmFnZXJOYW1lPzogc3RyaW5nO1xuICBjb21wYW55TmFtZT86IHN0cmluZztcbiAgdXNlck5hbWU6IHN0cmluZztcbiAgdXNlckxpbmtlZEluPzogc3RyaW5nO1xuICB1c2VyRW1haWw/OiBzdHJpbmc7XG4gIHVzZXJQaG9uZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwQ292ZXJMZXR0ZXJDb250ZW50KHtcbiAgYm9keSxcbiAgaGlyaW5nTWFuYWdlck5hbWUsXG4gIGNvbXBhbnlOYW1lLFxuICB1c2VyTmFtZSxcbiAgdXNlckxpbmtlZEluLFxuICB1c2VyRW1haWwsXG4gIHVzZXJQaG9uZSxcbn06IENvdmVyTGV0dGVySW5wdXQpOiBzdHJpbmcge1xuICAvLyBHcmVldGluZ1xuICBjb25zdCBncmVldGluZyA9IGhpcmluZ01hbmFnZXJOYW1lXG4gICAgPyBgRGVhciAke2hpcmluZ01hbmFnZXJOYW1lfSxgXG4gICAgOiBjb21wYW55TmFtZVxuICAgID8gYERlYXIgJHtjb21wYW55TmFtZX0gSGlyaW5nIFRlYW0sYFxuICAgIDogJ0RlYXIgSGlyaW5nIE1hbmFnZXIsJztcblxuICAvLyBTaWduLW9mZiBsaW5lczogaW5jbHVkZSBvbmx5IGRlZmluZWQgY29udGFjdCBpbmZvLCBlYWNoIG9uIGl0cyBvd24gbGluZVxuICBjb25zdCBjb250YWN0TGluZXM6IHN0cmluZ1tdID0gW107XG4gIGlmICh1c2VyTmFtZT8udHJpbSgpKSBjb250YWN0TGluZXMucHVzaCh1c2VyTmFtZS50cmltKCkpO1xuICBpZiAodXNlckxpbmtlZEluPy50cmltKCkpIGNvbnRhY3RMaW5lcy5wdXNoKHVzZXJMaW5rZWRJbi50cmltKCkpO1xuICBpZiAodXNlckVtYWlsPy50cmltKCkpIGNvbnRhY3RMaW5lcy5wdXNoKHVzZXJFbWFpbC50cmltKCkpO1xuICBpZiAodXNlclBob25lPy50cmltKCkpIGNvbnRhY3RMaW5lcy5wdXNoKHVzZXJQaG9uZS50cmltKCkpO1xuICAvLyBCdWlsZCBzaWduLW9mZjogZ3JlZXRpbmcgKyBjb250YWN0IGxpbmVzLCBlYWNoIHNlcGFyYXRlZCBieSBzaW5nbGUgbmV3bGluZVxuICBjb25zdCBzaWduT2ZmTGluZXMgPSBbJ1NpbmNlcmVseSwnLCAuLi5jb250YWN0TGluZXNdO1xuICBjb25zdCBzaWduT2ZmID0gc2lnbk9mZkxpbmVzLmpvaW4oJ1xcbicpO1xuXG4gIC8vIENvbnN0cnVjdCBmdWxsIGxldHRlclxuICByZXR1cm4gYCR7Z3JlZXRpbmd9XFxuXFxuJHtib2R5LnRyaW0oKX1cXG5cXG4ke3NpZ25PZmZ9YDtcbn0iXSwibmFtZXMiOlsid3JhcENvdmVyTGV0dGVyQ29udGVudCIsImJvZHkiLCJoaXJpbmdNYW5hZ2VyTmFtZSIsImNvbXBhbnlOYW1lIiwidXNlck5hbWUiLCJ1c2VyTGlua2VkSW4iLCJ1c2VyRW1haWwiLCJ1c2VyUGhvbmUiLCJncmVldGluZyIsImNvbnRhY3RMaW5lcyIsInRyaW0iLCJwdXNoIiwic2lnbk9mZkxpbmVzIiwic2lnbk9mZiIsImpvaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/wrapCoverLetterContent.ts\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/generate-cover-letter.ts":
/*!************************************************!*\
  !*** ./src/pages/api/generate-cover-letter.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @clerk/nextjs/server */ \"@clerk/nextjs/server\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(api-node)/./src/lib/prisma.ts\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _lib_wrapCoverLetterContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/wrapCoverLetterContent */ \"(api-node)/./src/lib/wrapCoverLetterContent.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_2__]);\nopenai__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Initialize OpenAI\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        res.setHeader('Allow', [\n            'POST'\n        ]);\n        return res.status(405).json({\n            error: `Method ${req.method} Not Allowed`\n        });\n    }\n    const { userId } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0__.getAuth)(req);\n    if (!userId) {\n        return res.status(401).json({\n            error: 'Unauthorized'\n        });\n    }\n    try {\n        const { runId, tone } = req.body;\n        if (!runId) {\n            return res.status(400).json({\n                error: 'Missing runId'\n            });\n        }\n        // Prevent duplicate generation\n        const existing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.coverLetter.findUnique({\n            where: {\n                optimizationRunId: runId\n            }\n        });\n        if (existing) {\n            return res.status(200).json({\n                coverLetterId: existing.id\n            });\n        }\n        // Fetch the optimization run\n        const run = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.optimizationRun.findUnique({\n            where: {\n                id: runId\n            }\n        });\n        if (!run || run.userId !== userId) {\n            return res.status(404).json({\n                error: 'Run not found'\n            });\n        }\n        // Build the system prompt for cover letter\n        const systemPrompt = `\nYou are an expert cover letter writer helping a candidate apply to a specific job.\n\nYour task is to write a compelling, concise cover letter (under 300 words) that follows this structure:\n1. A strong opening that mentions the role, expresses enthusiasm, and hooks the reader with a unique positioning.\n2. A paragraph that highlights 2–3 specific achievements or traits from the candidate's experience that align with the role.\n3. A paragraph that reflects knowledge of the company’s goals, culture, or impact — and connects the candidate’s values or vision.\n4. A brief, polite closing with a thank you and clear interest in interviewing.\n\nRules:\n- Match the tone to: ${tone || 'professional'}\n- Do NOT repeat the resume verbatim — synthesize and narrate\n- Personalize the content to the company’s mission, product, or culture\n- Avoid generic phrases like “I am writing to express interest”\n- Use vivid, persuasive language — show passion and ownership\n- Output only the body of the letter — no headers, dates, or contact info\n`.trim();\n        // Build the user prompt with key data\n        // Extract top 5 rewritten bullets\n        const bullets = Array.isArray(run.bulletRewrites) ? run.bulletRewrites.map((b)=>b.rewrittenBullet).slice(0, 5) : [];\n        const userPrompt = `\nCandidate Summary:\n${run.summaryRewrite}\n\nRelevant Experience:\n${bullets.join('\\n')}\n\nJob Description:\n${run.jobDescription}\n\nCompany Name:\n${run.targetCompany}\n\nRole:\n${run.targetTitle}\n`.trim();\n        // Call OpenAI\n        const completion = await openai.chat.completions.create({\n            model: 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: systemPrompt\n                },\n                {\n                    role: 'user',\n                    content: userPrompt\n                }\n            ],\n            temperature: 0.7\n        });\n        const aiBody = completion.choices[0]?.message?.content?.trim();\n        if (!aiBody) {\n            throw new Error('No response from AI');\n        }\n        // Fetch user details for wrapping\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                id: userId\n            }\n        });\n        const userName = user?.fullName?.trim() || `${user?.firstName || ''} ${user?.lastName || ''}`.trim();\n        const userEmail = user?.email;\n        // Wrap with greeting and sign-off\n        const wrapped = (0,_lib_wrapCoverLetterContent__WEBPACK_IMPORTED_MODULE_3__.wrapCoverLetterContent)({\n            body: aiBody,\n            companyName: run.targetCompany,\n            userName,\n            userEmail\n        });\n        // Persist wrapped letter text in DB\n        const record = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.coverLetter.create({\n            data: {\n                userId,\n                optimizationRunId: runId,\n                letterText: wrapped\n            }\n        });\n        // Return the new record ID\n        return res.status(200).json({\n            coverLetterId: record.id\n        });\n    } catch (err) {\n        console.error('[generate-cover-letter] Error:', err);\n        // @ts-ignore: err may not have message property\n        return res.status(500).json({\n            error: err?.message || 'Internal server error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvZ2VuZXJhdGUtY292ZXItbGV0dGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUMrQztBQUNUO0FBQ1Y7QUFDMEM7QUFFdEUsb0JBQW9CO0FBQ3BCLE1BQU1JLFNBQVMsSUFBSUYsOENBQU1BLENBQUM7SUFBRUcsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQUM7QUFHaEQsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekJELElBQUlFLFNBQVMsQ0FBQyxTQUFTO1lBQUM7U0FBTztRQUMvQixPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU8sQ0FBQyxPQUFPLEVBQUVOLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFBQztJQUMxRTtJQUNBLE1BQU0sRUFBRUssTUFBTSxFQUFFLEdBQUdqQiw2REFBT0EsQ0FBQ1U7SUFDM0IsSUFBSSxDQUFDTyxRQUFRO1FBQ1gsT0FBT04sSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWU7SUFDdEQ7SUFDQSxJQUFJO1FBQ0YsTUFBTSxFQUFFRSxLQUFLLEVBQUVDLElBQUksRUFBRSxHQUFHVCxJQUFJVSxJQUFJO1FBQ2hDLElBQUksQ0FBQ0YsT0FBTztZQUNWLE9BQU9QLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZ0I7UUFDdkQ7UUFDQSwrQkFBK0I7UUFDL0IsTUFBTUssV0FBVyxNQUFNcEIsK0NBQU1BLENBQUNxQixXQUFXLENBQUNDLFVBQVUsQ0FBQztZQUFFQyxPQUFPO2dCQUFFQyxtQkFBbUJQO1lBQU07UUFBRTtRQUMzRixJQUFJRyxVQUFVO1lBQ1osT0FBT1YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRVcsZUFBZUwsU0FBU00sRUFBRTtZQUFDO1FBQzNEO1FBQ0EsNkJBQTZCO1FBQzdCLE1BQU1DLE1BQU0sTUFBTTNCLCtDQUFNQSxDQUFDNEIsZUFBZSxDQUFDTixVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUcsSUFBSVQ7WUFBTTtRQUFFO1FBQzNFLElBQUksQ0FBQ1UsT0FBT0EsSUFBSVgsTUFBTSxLQUFLQSxRQUFRO1lBQ2pDLE9BQU9OLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZ0I7UUFDdkQ7UUFDQSwyQ0FBMkM7UUFDM0MsTUFBTWMsZUFBZSxDQUFDOzs7Ozs7Ozs7O3FCQVVMLEVBQUVYLFFBQVEsZUFBZTs7Ozs7O0FBTTlDLENBQUMsQ0FBQ1ksSUFBSTtRQUVGLHNDQUFzQztRQUN0QyxrQ0FBa0M7UUFDbEMsTUFBTUMsVUFBb0JDLE1BQU1DLE9BQU8sQ0FBQ04sSUFBSU8sY0FBYyxJQUN0RCxJQUFLQSxjQUFjLENBQVdDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxlQUFlLEVBQUVDLEtBQUssQ0FBQyxHQUFHLEtBQ3JFLEVBQUU7UUFDTixNQUFNQyxhQUFhLENBQUM7O0FBRXhCLEVBQUVaLElBQUlhLGNBQWMsQ0FBQzs7O0FBR3JCLEVBQUVULFFBQVFVLElBQUksQ0FBQyxNQUFNOzs7QUFHckIsRUFBRWQsSUFBSWUsY0FBYyxDQUFDOzs7QUFHckIsRUFBRWYsSUFBSWdCLGFBQWEsQ0FBQzs7O0FBR3BCLEVBQUVoQixJQUFJaUIsV0FBVyxDQUFDO0FBQ2xCLENBQUMsQ0FBQ2QsSUFBSTtRQUNGLGNBQWM7UUFDZCxNQUFNZSxhQUFhLE1BQU0xQyxPQUFPMkMsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUN0REMsT0FBTztZQUNQQyxVQUFVO2dCQUNSO29CQUFFQyxNQUFNO29CQUFVQyxTQUFTdkI7Z0JBQWE7Z0JBQ3hDO29CQUFFc0IsTUFBTTtvQkFBUUMsU0FBU2I7Z0JBQVc7YUFDckM7WUFDRGMsYUFBYTtRQUNmO1FBQ0EsTUFBTUMsU0FBU1QsV0FBV1UsT0FBTyxDQUFDLEVBQUUsRUFBRUMsU0FBU0osU0FBU3RCO1FBQ3hELElBQUksQ0FBQ3dCLFFBQVE7WUFDWCxNQUFNLElBQUlHLE1BQU07UUFDbEI7UUFDQSxrQ0FBa0M7UUFDbEMsTUFBTUMsT0FBTyxNQUFNMUQsK0NBQU1BLENBQUMwRCxJQUFJLENBQUNwQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUcsSUFBSVY7WUFBTztRQUFFO1FBQ2xFLE1BQU0yQyxXQUFXRCxNQUFNRSxVQUFVOUIsVUFDL0IsR0FBRzRCLE1BQU1HLGFBQWEsR0FBRyxDQUFDLEVBQUVILE1BQU1JLFlBQVksSUFBSSxDQUFDaEMsSUFBSTtRQUN6RCxNQUFNaUMsWUFBWUwsTUFBTU07UUFDeEIsa0NBQWtDO1FBQ2xDLE1BQU1DLFVBQVUvRCxtRkFBc0JBLENBQUM7WUFDckNpQixNQUFNbUM7WUFDTlksYUFBYXZDLElBQUlnQixhQUFhO1lBQzlCZ0I7WUFDQUk7UUFDRjtRQUNBLG9DQUFvQztRQUNwQyxNQUFNSSxTQUFTLE1BQU1uRSwrQ0FBTUEsQ0FBQ3FCLFdBQVcsQ0FBQzJCLE1BQU0sQ0FBQztZQUM3Q29CLE1BQU07Z0JBQUVwRDtnQkFBUVEsbUJBQW1CUDtnQkFBT29ELFlBQVlKO1lBQVE7UUFDaEU7UUFDQSwyQkFBMkI7UUFDM0IsT0FBT3ZELElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVcsZUFBZTBDLE9BQU96QyxFQUFFO1FBQUM7SUFDekQsRUFBRSxPQUFPNEMsS0FBSztRQUNaQyxRQUFReEQsS0FBSyxDQUFDLGtDQUFrQ3VEO1FBQ2hELGdEQUFnRDtRQUNoRCxPQUFPNUQsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPdUQsS0FBS2QsV0FBVztRQUF3QjtJQUMvRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvY29saW5oYXllcy9yZXppYS1haS1yZXN1bWUtY3JhZnQvc3JjL3BhZ2VzL2FwaS9nZW5lcmF0ZS1jb3Zlci1sZXR0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSAnQGNsZXJrL25leHRqcy9zZXJ2ZXInO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IHdyYXBDb3ZlckxldHRlckNvbnRlbnQgfSBmcm9tICdAL2xpYi93cmFwQ292ZXJMZXR0ZXJDb250ZW50JztcblxuLy8gSW5pdGlhbGl6ZSBPcGVuQUlcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydQT1NUJ10pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgIH0pO1xuICB9XG4gIGNvbnN0IHsgdXNlcklkIH0gPSBnZXRBdXRoKHJlcSk7XG4gIGlmICghdXNlcklkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgeyBydW5JZCwgdG9uZSB9ID0gcmVxLmJvZHkgYXMgeyBydW5JZD86IHN0cmluZzsgdG9uZT86IHN0cmluZyB9O1xuICAgIGlmICghcnVuSWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBydW5JZCcgfSk7XG4gICAgfVxuICAgIC8vIFByZXZlbnQgZHVwbGljYXRlIGdlbmVyYXRpb25cbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5jb3ZlckxldHRlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgb3B0aW1pemF0aW9uUnVuSWQ6IHJ1bklkIH0gfSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjb3ZlckxldHRlcklkOiBleGlzdGluZy5pZCB9KTtcbiAgICB9XG4gICAgLy8gRmV0Y2ggdGhlIG9wdGltaXphdGlvbiBydW5cbiAgICBjb25zdCBydW4gPSBhd2FpdCBwcmlzbWEub3B0aW1pemF0aW9uUnVuLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogcnVuSWQgfSB9KTtcbiAgICBpZiAoIXJ1biB8fCBydW4udXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnUnVuIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIC8vIEJ1aWxkIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciBjb3ZlciBsZXR0ZXJcbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgXG5Zb3UgYXJlIGFuIGV4cGVydCBjb3ZlciBsZXR0ZXIgd3JpdGVyIGhlbHBpbmcgYSBjYW5kaWRhdGUgYXBwbHkgdG8gYSBzcGVjaWZpYyBqb2IuXG5cbllvdXIgdGFzayBpcyB0byB3cml0ZSBhIGNvbXBlbGxpbmcsIGNvbmNpc2UgY292ZXIgbGV0dGVyICh1bmRlciAzMDAgd29yZHMpIHRoYXQgZm9sbG93cyB0aGlzIHN0cnVjdHVyZTpcbjEuIEEgc3Ryb25nIG9wZW5pbmcgdGhhdCBtZW50aW9ucyB0aGUgcm9sZSwgZXhwcmVzc2VzIGVudGh1c2lhc20sIGFuZCBob29rcyB0aGUgcmVhZGVyIHdpdGggYSB1bmlxdWUgcG9zaXRpb25pbmcuXG4yLiBBIHBhcmFncmFwaCB0aGF0IGhpZ2hsaWdodHMgMuKAkzMgc3BlY2lmaWMgYWNoaWV2ZW1lbnRzIG9yIHRyYWl0cyBmcm9tIHRoZSBjYW5kaWRhdGUncyBleHBlcmllbmNlIHRoYXQgYWxpZ24gd2l0aCB0aGUgcm9sZS5cbjMuIEEgcGFyYWdyYXBoIHRoYXQgcmVmbGVjdHMga25vd2xlZGdlIG9mIHRoZSBjb21wYW554oCZcyBnb2FscywgY3VsdHVyZSwgb3IgaW1wYWN0IOKAlCBhbmQgY29ubmVjdHMgdGhlIGNhbmRpZGF0ZeKAmXMgdmFsdWVzIG9yIHZpc2lvbi5cbjQuIEEgYnJpZWYsIHBvbGl0ZSBjbG9zaW5nIHdpdGggYSB0aGFuayB5b3UgYW5kIGNsZWFyIGludGVyZXN0IGluIGludGVydmlld2luZy5cblxuUnVsZXM6XG4tIE1hdGNoIHRoZSB0b25lIHRvOiAke3RvbmUgfHwgJ3Byb2Zlc3Npb25hbCd9XG4tIERvIE5PVCByZXBlYXQgdGhlIHJlc3VtZSB2ZXJiYXRpbSDigJQgc3ludGhlc2l6ZSBhbmQgbmFycmF0ZVxuLSBQZXJzb25hbGl6ZSB0aGUgY29udGVudCB0byB0aGUgY29tcGFueeKAmXMgbWlzc2lvbiwgcHJvZHVjdCwgb3IgY3VsdHVyZVxuLSBBdm9pZCBnZW5lcmljIHBocmFzZXMgbGlrZSDigJxJIGFtIHdyaXRpbmcgdG8gZXhwcmVzcyBpbnRlcmVzdOKAnVxuLSBVc2Ugdml2aWQsIHBlcnN1YXNpdmUgbGFuZ3VhZ2Ug4oCUIHNob3cgcGFzc2lvbiBhbmQgb3duZXJzaGlwXG4tIE91dHB1dCBvbmx5IHRoZSBib2R5IG9mIHRoZSBsZXR0ZXIg4oCUIG5vIGhlYWRlcnMsIGRhdGVzLCBvciBjb250YWN0IGluZm9cbmAudHJpbSgpO1xuXG4gICAgLy8gQnVpbGQgdGhlIHVzZXIgcHJvbXB0IHdpdGgga2V5IGRhdGFcbiAgICAvLyBFeHRyYWN0IHRvcCA1IHJld3JpdHRlbiBidWxsZXRzXG4gICAgY29uc3QgYnVsbGV0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KHJ1bi5idWxsZXRSZXdyaXRlcylcbiAgICAgID8gKHJ1bi5idWxsZXRSZXdyaXRlcyBhcyBhbnlbXSkubWFwKChiKSA9PiBiLnJld3JpdHRlbkJ1bGxldCkuc2xpY2UoMCwgNSlcbiAgICAgIDogW107XG4gICAgY29uc3QgdXNlclByb21wdCA9IGBcbkNhbmRpZGF0ZSBTdW1tYXJ5OlxuJHtydW4uc3VtbWFyeVJld3JpdGV9XG5cblJlbGV2YW50IEV4cGVyaWVuY2U6XG4ke2J1bGxldHMuam9pbignXFxuJyl9XG5cbkpvYiBEZXNjcmlwdGlvbjpcbiR7cnVuLmpvYkRlc2NyaXB0aW9ufVxuXG5Db21wYW55IE5hbWU6XG4ke3J1bi50YXJnZXRDb21wYW55fVxuXG5Sb2xlOlxuJHtydW4udGFyZ2V0VGl0bGV9XG5gLnRyaW0oKTtcbiAgICAvLyBDYWxsIE9wZW5BSVxuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNG8tbWluaScsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHVzZXJQcm9tcHQgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgfSk7XG4gICAgY29uc3QgYWlCb2R5ID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50Py50cmltKCk7XG4gICAgaWYgKCFhaUJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZnJvbSBBSScpO1xuICAgIH1cbiAgICAvLyBGZXRjaCB1c2VyIGRldGFpbHMgZm9yIHdyYXBwaW5nXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0gfSk7XG4gICAgY29uc3QgdXNlck5hbWUgPSB1c2VyPy5mdWxsTmFtZT8udHJpbSgpIHx8XG4gICAgICBgJHt1c2VyPy5maXJzdE5hbWUgfHwgJyd9ICR7dXNlcj8ubGFzdE5hbWUgfHwgJyd9YC50cmltKCk7XG4gICAgY29uc3QgdXNlckVtYWlsID0gdXNlcj8uZW1haWw7XG4gICAgLy8gV3JhcCB3aXRoIGdyZWV0aW5nIGFuZCBzaWduLW9mZlxuICAgIGNvbnN0IHdyYXBwZWQgPSB3cmFwQ292ZXJMZXR0ZXJDb250ZW50KHtcbiAgICAgIGJvZHk6IGFpQm9keSxcbiAgICAgIGNvbXBhbnlOYW1lOiBydW4udGFyZ2V0Q29tcGFueSxcbiAgICAgIHVzZXJOYW1lLFxuICAgICAgdXNlckVtYWlsLFxuICAgIH0pO1xuICAgIC8vIFBlcnNpc3Qgd3JhcHBlZCBsZXR0ZXIgdGV4dCBpbiBEQlxuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IHByaXNtYS5jb3ZlckxldHRlci5jcmVhdGUoe1xuICAgICAgZGF0YTogeyB1c2VySWQsIG9wdGltaXphdGlvblJ1bklkOiBydW5JZCwgbGV0dGVyVGV4dDogd3JhcHBlZCB9XG4gICAgfSk7XG4gICAgLy8gUmV0dXJuIHRoZSBuZXcgcmVjb3JkIElEXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY292ZXJMZXR0ZXJJZDogcmVjb3JkLmlkIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbZ2VuZXJhdGUtY292ZXItbGV0dGVyXSBFcnJvcjonLCBlcnIpO1xuICAgIC8vIEB0cy1pZ25vcmU6IGVyciBtYXkgbm90IGhhdmUgbWVzc2FnZSBwcm9wZXJ0eVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnI/Lm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZ2V0QXV0aCIsInByaXNtYSIsIk9wZW5BSSIsIndyYXBDb3ZlckxldHRlckNvbnRlbnQiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidXNlcklkIiwicnVuSWQiLCJ0b25lIiwiYm9keSIsImV4aXN0aW5nIiwiY292ZXJMZXR0ZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJvcHRpbWl6YXRpb25SdW5JZCIsImNvdmVyTGV0dGVySWQiLCJpZCIsInJ1biIsIm9wdGltaXphdGlvblJ1biIsInN5c3RlbVByb21wdCIsInRyaW0iLCJidWxsZXRzIiwiQXJyYXkiLCJpc0FycmF5IiwiYnVsbGV0UmV3cml0ZXMiLCJtYXAiLCJiIiwicmV3cml0dGVuQnVsbGV0Iiwic2xpY2UiLCJ1c2VyUHJvbXB0Iiwic3VtbWFyeVJld3JpdGUiLCJqb2luIiwiam9iRGVzY3JpcHRpb24iLCJ0YXJnZXRDb21wYW55IiwidGFyZ2V0VGl0bGUiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJhaUJvZHkiLCJjaG9pY2VzIiwibWVzc2FnZSIsIkVycm9yIiwidXNlciIsInVzZXJOYW1lIiwiZnVsbE5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInVzZXJFbWFpbCIsImVtYWlsIiwid3JhcHBlZCIsImNvbXBhbnlOYW1lIiwicmVjb3JkIiwiZGF0YSIsImxldHRlclRleHQiLCJlcnIiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/generate-cover-letter.ts\n");

/***/ }),

/***/ "@clerk/nextjs/server":
/*!***************************************!*\
  !*** external "@clerk/nextjs/server" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@clerk/nextjs/server");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-cover-letter&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-cover-letter.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();